<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Add a Review â€” Mr.Look Photography</title>

  <!-- Fonts / Icons / Bootstrap (match your main page) -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/remixicon@4.3.0/fonts/remixicon.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Your site styles -->
  <link rel="stylesheet" href="styles.css" />

  <style>
    /* Page-specific sugar */
    body { background: var(--gray-100, #f5f5f5); }
    .page-wrap { min-height: 100svh; display:grid; place-items:center; padding: clamp(16px, 3vw, 28px); }
    .card-review { width: min(720px, 96vw); border-radius: 16px; box-shadow: var(--shadow, 0 20px 60px rgba(0,0,0,.08)); }
    .brand-mini { display:flex; align-items:center; gap:.6rem; font-weight:800; letter-spacing:.12em; text-transform:uppercase; }
    .brand-mini i { color: var(--yellow, #f59e0b); }
    .form-actions { display:flex; gap:.6rem; flex-wrap:wrap; align-items:center; }
    .done { display:none; }
    .done.show { display:block; }
    /* Stars (same as on main site) */
    .stars-input{ display:flex; flex-direction:row-reverse; gap:6px; }
    .stars-input input{ display:none; }
    .stars-input label{ cursor:pointer; font-size:1.6rem; line-height:1; color:#ccc; transition:transform .1s ease; user-select:none; }
    .stars-input input:checked ~ label, .stars-input label:hover, .stars-input label:hover ~ label{ color:#f5b301; }
    .stars-input label:active{ transform:scale(.94); }
  </style>
</head>
<body>

  <div class="page-wrap">
    <div class="card card-review">
      <div class="card-body p-4 p-sm-5">
        <div class="d-flex justify-content-between align-items-center mb-3">
          <div class="brand-mini"><i class="ri-star-smile-line"></i> Mr.Look Reviews</div>
          <a href="index.html#reviews" class="btn btn-outline-secondary btn-sm">
            <i class="ri-arrow-left-line"></i> Back to site
          </a>
        </div>

        <h1 class="h4 mb-1">Add your review</h1>
        <p class="text-muted mb-4">Share a few words about your experience. Thank you! ðŸ§¡</p>

        <!-- Form -->
        <form id="reviewForm" class="row g-3" autocomplete="on" novalidate>
          <div class="col-md-6">
            <label class="form-label">Your Name</label>
            <input class="form-control" name="name" placeholder="e.g., Sanduni" required>
          </div>

          <div class="col-md-6">
            <label class="form-label">Rating</label>
            <div class="stars-input" role="radiogroup" aria-label="Rating out of 5">
              <input type="radio" id="r5" name="rating" value="5" checked>
              <label for="r5" title="5 stars">â˜…</label>
              <input type="radio" id="r4" name="rating" value="4">
              <label for="r4" title="4 stars">â˜…</label>
              <input type="radio" id="r3" name="rating" value="3">
              <label for="r3" title="3 stars">â˜…</label>
              <input type="radio" id="r2" name="rating" value="2">
              <label for="r2" title="2 stars">â˜…</label>
              <input type="radio" id="r1" name="rating" value="1">
              <label for="r1" title="1 star">â˜…</label>
            </div>
          </div>

          <div class="col-12">
            <label class="form-label">Your Review</label>
            <textarea class="form-control" name="text" rows="4" placeholder="Tell us about your experienceâ€¦" required></textarea>
          </div>

          <div class="col-12 form-actions">
            <button class="btn btn-primary" type="submit">Submit Review</button>
            <a class="btn btn-light" href="index.html#reviews">Cancel</a>
            <small id="reviewMsg" class="text-muted"></small>
          </div>
        </form>

        <!-- Success state -->
        <div id="done" class="done mt-3">
          <div class="alert alert-success mb-3">
            Thanks! Your review was added.
          </div>
          <a class="btn btn-dark" id="backBtn" href="index.html#reviews">
            <i class="ri-arrow-left-line"></i> Back to Reviews
          </a>
        </div>
      </div>
    </div>
  </div>

  <script>
    (function(){
      const form = document.getElementById('reviewForm');
      const msg  = document.getElementById('reviewMsg');
      const done = document.getElementById('done');
      const backBtn = document.getElementById('backBtn');

      // Allow custom redirect: add-review.html?redirect=/yourpage#reviews
      const params = new URLSearchParams(location.search);
      const redirect = params.get('redirect') || 'index.html#reviews';

      const KEY = 'mrlook_reviews_v1';
      const getStored = ()=> {
        try { return JSON.parse(localStorage.getItem(KEY) || '[]'); }
        catch { return []; }
      };
      const setStored = (arr)=> localStorage.setItem(KEY, JSON.stringify(arr));
      const escapeHtml = (s)=> (s||'').replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#039;'}[m]));

      form.addEventListener('submit', (e)=>{
        e.preventDefault();

        // Basic validity
        if (form.reportValidity && !form.reportValidity()) return;

        const data   = new FormData(form);
        const name   = (data.get('name')||'').toString().trim() || 'Anonymous';
        const rating = Number(data.get('rating')||5);
        const text   = (data.get('text')||'').toString().trim();
        if (!text) return;

        const payload = { name, rating, text };
        const cur = getStored(); cur.push(payload); setStored(cur);

        // Visual feedback, then redirect
        if (msg) { msg.textContent = 'Savingâ€¦'; }
        form.classList.add('was-validated');
        form.reset();
        const r5 = document.getElementById('r5'); if (r5) r5.checked = true;

        if (done) done.classList.add('show');
        if (backBtn) backBtn.href = redirect;

        // Redirect after a brief pause (nice on mobile)
        setTimeout(()=> { location.href = redirect; }, 900);
      });
    })();
  </script>
</body>
</html>
